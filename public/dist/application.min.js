!function t(e,r,n){function o(u,s){if(!r[u]){if(!e[u]){var a="function"==typeof require&&require;if(!s&&a)return a(u,!0);if(i)return i(u,!0);throw new Error("Cannot find module '"+u+"'")}var c=r[u]={exports:{}};e[u][0].call(c.exports,function(t){var r=e[u][1][t];return o(r?r:t)},c,c.exports,t,e,r,n)}return r[u].exports}for(var i="function"==typeof require&&require,u=0;u<n.length;u++)o(n[u]);return o}({1:[function(t,e,r){"use strict";(function(){var t="mean",e=["ngResource","ngCookies","ngAnimate","ngSanitize","ui.router","ui.bootstrap","ui.utils"],r=function(e,r){angular.module(e,r||[]),angular.module(t).requires.push(e)};return{applicationModuleName:t,applicationModuleVendorDependencies:e,registerModule:r}})()},{}]},{},[1])(function e(t,r,n){function o(u,s){if(!r[u]){if(!t[u]){var a="function"==typeof require&&require;if(!s&&a)return a(u,!0);if(i)return i(u,!0);throw new Error("Cannot find module '"+u+"'")}var c=r[u]={exports:{}};t[u][0].call(c.exports,function(e){var r=t[u][1][e];return o(r?r:e)},c,c.exports,e,t,r,n)}return r[u].exports}for(var i="function"==typeof require&&require,u=0;u<n.length;u++)o(n[u]);return o})({1:[function(t,e,r){"use strict";angular.module(ApplicationConfiguration.applicationModuleName,ApplicationConfiguration.applicationModuleVendorDependencies),angular.module(ApplicationConfiguration.applicationModuleName).config(["$locationProvider",function(t){t.hashPrefix("!")}]),angular.element(document).ready(function(){"#_=_"===window.location.hash&&(window.location.hash="#!"),angular.bootstrap(document,[ApplicationConfiguration.applicationModuleName])})},{}]},{},[1])(function r(t,e,n){function o(u,s){if(!e[u]){if(!t[u]){var a="function"==typeof require&&require;if(!s&&a)return a(u,!0);if(i)return i(u,!0);throw new Error("Cannot find module '"+u+"'")}var c=e[u]={exports:{}};t[u][0].call(c.exports,function(e){var r=t[u][1][e];return o(r?r:e)},c,c.exports,r,t,e,n)}return e[u].exports}for(var i="function"==typeof require&&require,u=0;u<n.length;u++)o(n[u]);return o})({1:[function(t,e,r){"use strict";ApplicationConfiguration.registerModule("core")},{}]},{},[1])(function n(t,e,r){function o(u,s){if(!e[u]){if(!t[u]){var a="function"==typeof require&&require;if(!s&&a)return a(u,!0);if(i)return i(u,!0);throw new Error("Cannot find module '"+u+"'")}var c=e[u]={exports:{}};t[u][0].call(c.exports,function(e){var r=t[u][1][e];return o(r?r:e)},c,c.exports,n,t,e,r)}return e[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o})({1:[function(t,e,r){"use strict";ApplicationConfiguration.registerModule("users")},{}]},{},[1])(function o(t,e,r){function n(u,s){if(!e[u]){if(!t[u]){var a="function"==typeof require&&require;if(!s&&a)return a(u,!0);if(i)return i(u,!0);throw new Error("Cannot find module '"+u+"'")}var c=e[u]={exports:{}};t[u][0].call(c.exports,function(e){var r=t[u][1][e];return n(r?r:e)},c,c.exports,o,t,e,r)}return e[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)n(r[u]);return n})({1:[function(t,e,r){(function(){"use strict";angular.module("core").config(["$stateProvider","$urlRouterProvider",function(t,e){return e.otherwise("/about"),t.state("today",{url:"/today",templateUrl:"modules/core/views/home.client.view.html"}).state("history",{url:"/history/:date",templateUrl:"modules/core/views/home.client.view.html"}).state("about",{url:"/about",templateUrl:"modules/core/views/about.client.view.html"}).state("welcome",{url:"/welcome",templateUrl:"modules/core/views/welcome.client.view.html"})}])}).call(this)},{}]},{},[1])(function i(t,e,r){function n(u,s){if(!e[u]){if(!t[u]){var a="function"==typeof require&&require;if(!s&&a)return a(u,!0);if(o)return o(u,!0);throw new Error("Cannot find module '"+u+"'")}var c=e[u]={exports:{}};t[u][0].call(c.exports,function(e){var r=t[u][1][e];return n(r?r:e)},c,c.exports,i,t,e,r)}return e[u].exports}for(var o="function"==typeof require&&require,u=0;u<r.length;u++)n(r[u]);return n})({1:[function(t,e,r){(function(){"use strict";angular.module("core").controller("HeaderController",["$scope","Authentication","Menus",function(t,e,r){return t.authentication=e,t.isCollapsed=!1,t.menu=r.getMenu("topbar"),t.toggleCollapsibleMenu=function(){t.isCollapsed=!t.isCollapsed},t.$on("$stateChangeSuccess",function(){t.isCollapsed=!1})}])}).call(this)},{}]},{},[1])(function u(t,e,r){function n(i,s){if(!e[i]){if(!t[i]){var a="function"==typeof require&&require;if(!s&&a)return a(i,!0);if(o)return o(i,!0);throw new Error("Cannot find module '"+i+"'")}var c=e[i]={exports:{}};t[i][0].call(c.exports,function(e){var r=t[i][1][e];return n(r?r:e)},c,c.exports,u,t,e,r)}return e[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)n(r[i]);return n})({1:[function(t,e,r){(function(){"use strict";angular.module("core").controller("TextController",["$scope","$http","$stateParams","$location","Authentication","$document","AlertService","WebApiService","TimelineService","DateService",function(t,e,r,n,o,i,u,s,a,c){t.authentication=o,t.history={},t.todayDateString=c.getTodayString(),t.getWordCounter=function(){return t.text&&t.text.trim()?t.text.trim().split(/[\s,.;]+/).length:0},t.changed=!1,t.$watch("text",function(e,r){t.changed=e!==r&&void 0!==r,t.changed&&(t.state="notsaved",a.setCounterValue(c.getToday(),t.getWordCounter()))}),t.insertText=function(){return s.getToday().then(function(e){return t.text=e.data.text,t.state="saved",setInterval(t.save,1e4)},function(t){})},t.historyText="",t.state="saved",t.saveByKeys=function(e){return e.preventDefault(),e.stopPropagation(),t.changed&&void 0!==t.text?(t.state="saving",s.postText(t.text).then(function(e){return e.data.message?(u.send("danger",e.data.message,3e3),void(t.state="notsaved")):(u.send("success","Продолжайте!","Сохранение прошло успешно!",2e3),t.state="saved",t.changed=!1)},function(e){return u.send("danger","Упс!",e,4e3),t.state="notsaved"})):u.send("success","Продолжайте!","Ничего не изменилось с прошлого сохранения!",2e3),!1},t.save=function(){return t.changed&&""!==t.text?(t.state="saving",s.postText(t.text).then(function(e){return e.data.message?void u.send("danger",e.message,3e3):(t.state="saved",t.changed=!1)},function(t){return u.send("danger","Упс!",t,4e3)})):void 0},t.showText=function(r){if(t.current_date.setHours(0,0,0,0)>new Date(t.curMonth+"-"+r).setHours(0,0,0,0))r+="",r=2===r.length?r:"0"+r,t.hideToday=!0,t.curDate=new Date(t.curMonth+"-"+r),e.get("/text/"+t.curMonth+"-"+r).success(function(e,r,n){t.historyText=e.text});else{if(t.current_date.setHours(0,0,0,0)!==new Date(t.curMonth+"-"+r).setHours(0,0,0,0))return void u.send("info","Машину времени пока изобретаем","Давайте жить сегодняшним днем!",3e3);t.hideToday=!1,t.historyText="",t.curDate=t.current_date}},t.$watch(function(){return a.workingDate},function(e,r){return e!==t.todayDateString?s.getText(e).then(function(r){return t.history.text=r.data.text,t.history.date=e},function(t){}):t.history={}})}])}).call(this)},{}]},{},[1])(function s(t,e,r){function n(i,u){if(!e[i]){if(!t[i]){var a="function"==typeof require&&require;if(!u&&a)return a(i,!0);if(o)return o(i,!0);throw new Error("Cannot find module '"+i+"'")}var c=e[i]={exports:{}};t[i][0].call(c.exports,function(e){var r=t[i][1][e];return n(r?r:e)},c,c.exports,s,t,e,r)}return e[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)n(r[i]);return n})({1:[function(t,e,r){(function(){angular.module("core").controller("TimelineController",["$scope","TimelineService","Authentication",function(t,e,r){return t.timeline={},e.fetchTimeline().then(function(){return t.timeline.days=e.timeline,t.timeline.languageMonth=e.monthLocaleString}),t.timeline_button_class=function(r,n){var o;return o="","--"===r&&(o="btn-default"),0===r&&(o="btn-info"),r>=500&&(o="btn-danger"),r>0&&500>r&&(o="btn-success"),e.getWorkingDate()===t.get_date_string(n)&&(o+=" active"),o},t.show_next_month=function(){return e.workingMonthIsLessThenCurrentMonth()},t.get_date_string=function(t){return t=t.toString(),e.getWorkingMonth()+"-"+(2===t.length?t:"0"+t)},t.changeMonth=function(r){switch(r){case"prev":e.prevmonth();break;case"next":e.nextmonth()}return e.fetchTimeline().then(function(){return t.timeline.days=e.timeline,t.timeline.languageMonth=e.monthLocaleString})},t.goToHistory=function(t){return e.setWorkingDate(t)}}])}).call(this)},{}]},{},[1])(function a(t,e,r){function n(i,u){if(!e[i]){if(!t[i]){var s="function"==typeof require&&require;if(!u&&s)return s(i,!0);if(o)return o(i,!0);throw new Error("Cannot find module '"+i+"'")}var c=e[i]={exports:{}};t[i][0].call(c.exports,function(e){var r=t[i][1][e];return n(r?r:e)},c,c.exports,a,t,e,r)}return e[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)n(r[i]);return n})({1:[function(t,e,r){(function(){"use strict";angular.module("core").directive("alerts",[function(){return{templateUrl:"modules/core/views/alerts.client.view.html",restrict:"E"}}])}).call(this)},{}]},{},[1])(function c(t,e,r){function n(i,u){if(!e[i]){if(!t[i]){var s="function"==typeof require&&require;if(!u&&s)return s(i,!0);if(o)return o(i,!0);throw new Error("Cannot find module '"+i+"'")}var a=e[i]={exports:{}};t[i][0].call(a.exports,function(e){var r=t[i][1][e];return n(r?r:e)},a,a.exports,c,t,e,r)}return e[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)n(r[i]);return n})({1:[function(t,e,r){(function(){angular.module("core").directive("authHide",["Authentication",function(t){return{restrict:"A",link:function(e,r,n){return e.authentication=t,e.$watch(e.authentication,function(t,n){return e.authentication.user?r.addClass("ng-hide"):r.removeClass("ng-hide")})}}}]).directive("authShow",["Authentication",function(t){return{restrict:"A",link:function(e,r,n){return e.authentication=t,e.$watch(e.authentication,function(t,n){return e.authentication.user?r.removeClass("ng-hide"):r.addClass("ng-hide")})}}}])}).call(this)},{}]},{},[1])(function f(t,e,r){function n(i,u){if(!e[i]){if(!t[i]){var s="function"==typeof require&&require;if(!u&&s)return s(i,!0);if(o)return o(i,!0);throw new Error("Cannot find module '"+i+"'")}var a=e[i]={exports:{}};t[i][0].call(a.exports,function(e){var r=t[i][1][e];return n(r?r:e)},a,a.exports,f,t,e,r)}return e[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)n(r[i]);return n})({1:[function(t,e,r){(function(){"use strict";angular.module("core").directive("callbackform",[function(){return{templateUrl:"modules/core/views/callbackform.client.view.html",restrict:"E",scope:{},link:function(t,e,r){return e.on("click",function(t){t.preventDefault(),t.stopPropagation()})}}}])}).call(this)},{}]},{},[1])(function l(t,e,r){function n(i,u){if(!e[i]){if(!t[i]){var s="function"==typeof require&&require;if(!u&&s)return s(i,!0);if(o)return o(i,!0);throw new Error("Cannot find module '"+i+"'")}var a=e[i]={exports:{}};t[i][0].call(a.exports,function(e){var r=t[i][1][e];return n(r?r:e)},a,a.exports,l,t,e,r)}return e[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)n(r[i]);return n})({1:[function(t,e,r){(function(){"use strict";angular.module("core").directive("sooHeader",[function(){return{templateUrl:"modules/core/views/header.client.view.html",restrict:"E",controller:"HeaderController",scope:{}}}])}).call(this)},{}]},{},[1])(function p(t,e,r){function n(i,u){if(!e[i]){if(!t[i]){var s="function"==typeof require&&require;if(!u&&s)return s(i,!0);if(o)return o(i,!0);throw new Error("Cannot find module '"+i+"'")}var a=e[i]={exports:{}};t[i][0].call(a.exports,function(e){var r=t[i][1][e];return n(r?r:e)},a,a.exports,p,t,e,r)}return e[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)n(r[i]);return n})({1:[function(t,e,r){(function(){"use strict";angular.module("core").directive("sooText",["TimelineService","AlertService","DateService","$stateParams",function(t,e,r,n){return{templateUrl:"modules/core/views/text.client.view.html",restrict:"E",controller:"TextController",link:function(t,e,r){n.date?t.insertText(n.date):t.insertText("today")}}}])}).call(this)},{}]},{},[1])(function h(t,e,r){function n(i,u){if(!e[i]){if(!t[i]){var s="function"==typeof require&&require;if(!u&&s)return s(i,!0);if(o)return o(i,!0);throw new Error("Cannot find module '"+i+"'")}var a=e[i]={exports:{}};t[i][0].call(a.exports,function(e){var r=t[i][1][e];return n(r?r:e)},a,a.exports,h,t,e,r)}return e[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)n(r[i]);return n})({1:[function(t,e,r){(function(){"use strict";angular.module("core").directive("timeline",[function(){return{templateUrl:"modules/core/views/timeline.client.view.html",restrict:"E",scope:{},controller:"TimelineController"}}])}).call(this)},{}]},{},[1])(function d(t,e,r){function n(i,u){if(!e[i]){if(!t[i]){var s="function"==typeof require&&require;if(!u&&s)return s(i,!0);if(o)return o(i,!0);throw new Error("Cannot find module '"+i+"'")}var a=e[i]={exports:{}};t[i][0].call(a.exports,function(e){var r=t[i][1][e];return n(r?r:e)},a,a.exports,d,t,e,r)}return e[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)n(r[i]);return n})({1:[function(t,e,r){(function(){}).call(this)},{}]},{},[1])(function m(t,e,r){function n(i,u){if(!e[i]){if(!t[i]){var s="function"==typeof require&&require;if(!u&&s)return s(i,!0);if(o)return o(i,!0);throw new Error("Cannot find module '"+i+"'")}var a=e[i]={exports:{}};t[i][0].call(a.exports,function(e){var r=t[i][1][e];return n(r?r:e)},a,a.exports,m,t,e,r)}return e[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)n(r[i]);return n})({1:[function(t,e,r){(function(){"use strict";Date.prototype.yyyymm=function(){var t,e;return e=this.getFullYear().toString(),t=(this.getMonth()+1).toString(),e+"-"+(2===t.length?t:"0"+t)},Date.prototype.yyyymmdd=function(){var t,e,r;return r=this.getFullYear().toString(),e=(this.getMonth()+1).toString(),t=this.getDate().toString(),r+"-"+(2===e.length?e:"0"+e)+"-"+(2===t.length?t:"0"+t)},Date.prototype.nextMonth=function(){return new Date(this.setMonth(this.getMonth()+1))},Date.prototype.prevMonth=function(){return new Date(this.setMonth(this.getMonth()-1))},String.prototype.yyyymmToDate=function(){return new Date(this.slice(0,4),+this.slice(5,7)-1)},Date.prototype.isCurrentMonth=function(){var t,e,r,n,o,i;return i=this,n=new Date,o=n.getFullYear(),e=i.getFullYear(),r=n.getMonth(),t=i.getMonth(),r===t&&o===e},Date.prototype.daysInMonth=function(){return new Date(this.getFullYear(),this.getMonth()+1,0).getDate()},Date.prototype.isLessThenCurrentMonth=function(){var t;return t=new Date,t.setMonth(t.getMonth()-1),Date.parse(t)>Date.parse(this)}}).call(this)},{}]},{},[1])(function g(t,e,r){function n(i,u){if(!e[i]){if(!t[i]){var s="function"==typeof require&&require;if(!u&&s)return s(i,!0);if(o)return o(i,!0);throw new Error("Cannot find module '"+i+"'")}var a=e[i]={exports:{}};t[i][0].call(a.exports,function(e){var r=t[i][1][e];return n(r?r:e)},a,a.exports,g,t,e,r)}return e[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)n(r[i]);return n})({1:[function(t,e,r){(function(){angular.module("core").factory("WebApiService",["$http","$q",function(t,e){var r;return new(r=function(){function r(){}return r.prototype.timelineCache=[],r.prototype.getToday=function(){return t.get("/today")},r.prototype.getText=function(e){return t.get("/text/"+e)},r.prototype.fetchTimeline=function(r,n){var o,i,u,s,a;return u=e.defer(),this.timelineCache[r]?(n&&n(this.timelineCache[r]),u.resolve(),u.promise):(a=r.yyyymmToDate(),s=new Date,i=a.daysInMonth(),o=function(){var t,e,r;for(r=[],t=1,e=i-1;e>=1?e>=t:t>=e;e>=1?t++:t--)r.push("--");return r}(),t.get("/texts/"+r).then(function(t){return function(e){var c,f;return a.isCurrentMonth()&&(c=s.getDate()),a.isLessThenCurrentMonth()&&(c=i),c&&([].splice.apply(o,[0,c-2-0+1].concat(f=function(){var t,e,r;for(r=[],t=1,e=c;e>=1?e>=t:t>=e;e>=1?t++:t--)r.push(0);return r}())),f),e.data.forEach(function(t){o[new Date(t.date).getDate()-1]=t.counter}),a.isCurrentMonth()||(t.timelineCache[r]=o),n&&n(o),u.resolve()}}(this)),u.promise)},r.prototype.postText=function(r){var n;return n=e.defer(),void 0===r?(n.reject("Вы ничего не ввели"),n.promise):t.post("/texts",{text:r,date:Date.now(),counter:r.trim().split(/\s+/).length})},r}())}])}).call(this)},{}]},{},[1])(function v(t,e,r){function n(i,u){if(!e[i]){if(!t[i]){var s="function"==typeof require&&require;if(!u&&s)return s(i,!0);if(o)return o(i,!0);throw new Error("Cannot find module '"+i+"'")}var a=e[i]={exports:{}};t[i][0].call(a.exports,function(e){var r=t[i][1][e];return n(r?r:e)},a,a.exports,v,t,e,r)}return e[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)n(r[i]);return n})({1:[function(t,e,r){(function(){"use strict";angular.module("core").factory("AlertService",["$timeout","$rootScope",function(t,e){var r;return new(r=function(){function r(){e.alerts=[]}return r.prototype.send=function(r,n,o,i){e.alerts.push({type:r,title:n,msg:o,close:function(t){return function(){return t.closeAlert(t)}}(this)}),"undefined"==typeof i&&(i=7e3),i&&t(function(t){return function(){t.closeAlert(t)}}(this),i)},r.prototype.closeAlert=function(t){return this.closeAlertIdx(e.alerts.indexOf(t))},r.prototype.closeAlertIdx=function(t){return e.alerts.splice(t,1)},r}())}])}).call(this)},{}]},{},[1])(function y(t,e,r){function n(i,u){if(!e[i]){if(!t[i]){var s="function"==typeof require&&require;if(!u&&s)return s(i,!0);if(o)return o(i,!0);throw new Error("Cannot find module '"+i+"'")}var a=e[i]={exports:{}};t[i][0].call(a.exports,function(e){var r=t[i][1][e];return n(r?r:e)},a,a.exports,y,t,e,r)}return e[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)n(r[i]);return n})({1:[function(t,e,r){(function(){angular.module("core").factory("DateService",[function(){var t;return new(t=function(){function t(){this.today=new Date}return t.prototype.today=null,t.prototype.working_date=null,t.prototype.getToday=function(){return this.today},t.prototype.getTodayString=function(){return this.today.yyyymmdd()},t.prototype.getTodayDayNumber=function(){return this.today.getDate()},t.prototype.getTodayDayString=function(){var t;return t=this.today.getDate().toString(),2===t.length?t:"0"+t},t.prototype.getTodayMonthString=function(){return this.today.yyyymm()},t.prototype.daysInMonth=function(t,e){return new Date(e,t+1,0).getDate()},t.prototype.nextMonthString=function(t){return new Date(t.setMonth(t.getMonth()+1)).yyyymm()},t.prototype.prevMonthString=function(t){return new Date(t.setMonth(t.getMonth()-1)).yyyymm()},t}())}])}).call(this)},{}]},{},[1])(function w(t,e,r){function n(i,u){if(!e[i]){if(!t[i]){var s="function"==typeof require&&require;if(!u&&s)return s(i,!0);if(o)return o(i,!0);throw new Error("Cannot find module '"+i+"'")}var a=e[i]={exports:{}};t[i][0].call(a.exports,function(e){var r=t[i][1][e];return n(r?r:e)},a,a.exports,w,t,e,r)}return e[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)n(r[i]);return n})({1:[function(t,e,r){"use strict";angular.module("core").service("Menus",[function(){this.defaultRoles=["*"],this.menus={};var t=function(t){if(!t)return this.isPublic;if(~this.roles.indexOf("*"))return!0;for(var e in t.roles)for(var r in this.roles)if(this.roles[r]===t.roles[e])return!0;return!1};this.validateMenuExistance=function(t){if(t&&t.length){if(this.menus[t])return!0;throw new Error("Menu does not exists")}throw new Error("MenuId was not provided")},this.getMenu=function(t){return this.validateMenuExistance(t),this.menus[t]},this.addMenu=function(e,r,n){return this.menus[e]={isPublic:r||!1,roles:n||this.defaultRoles,items:[],shouldRender:t},this.menus[e]},this.removeMenu=function(t){this.validateMenuExistance(t),delete this.menus[t]},this.addMenuItem=function(e,r,n,o,i,u,s,a){return this.validateMenuExistance(e),this.menus[e].items.push({title:r,link:n,menuItemType:o||"item",menuItemClass:o,uiRoute:i||"/"+n,isPublic:null===u||"undefined"==typeof u?this.menus[e].isPublic:u,roles:null===s||"undefined"==typeof s?this.menus[e].roles:s,position:a||0,items:[],shouldRender:t}),this.menus[e]},this.addSubMenuItem=function(e,r,n,o,i,u,s,a){this.validateMenuExistance(e);for(var c in this.menus[e].items)this.menus[e].items[c].link===r&&this.menus[e].items[c].items.push({title:n,link:o,uiRoute:i||"/"+o,isPublic:null===u||"undefined"==typeof u?this.menus[e].items[c].isPublic:u,roles:null===s||"undefined"==typeof s?this.menus[e].items[c].roles:s,position:a||0,shouldRender:t});return this.menus[e]},this.removeMenuItem=function(t,e){this.validateMenuExistance(t);for(var r in this.menus[t].items)this.menus[t].items[r].link===e&&this.menus[t].items.splice(r,1);return this.menus[t]},this.removeSubMenuItem=function(t,e){this.validateMenuExistance(t);for(var r in this.menus[t].items)for(var n in this.menus[t].items[r].items)this.menus[t].items[r].items[n].link===e&&this.menus[t].items[r].items.splice(n,1);return this.menus[t]},this.addMenu("topbar")}])},{}]},{},[1])(function x(t,e,r){function n(i,u){if(!e[i]){if(!t[i]){var s="function"==typeof require&&require;if(!u&&s)return s(i,!0);if(o)return o(i,!0);throw new Error("Cannot find module '"+i+"'")}var a=e[i]={exports:{}};t[i][0].call(a.exports,function(e){var r=t[i][1][e];return n(r?r:e)},a,a.exports,x,t,e,r)}return e[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)n(r[i]);return n})({1:[function(t,e,r){(function(){}).call(this)},{}]},{},[1])(function q(t,e,r){function n(i,u){if(!e[i]){if(!t[i]){var s="function"==typeof require&&require;if(!u&&s)return s(i,!0);if(o)return o(i,!0);throw new Error("Cannot find module '"+i+"'")}var a=e[i]={exports:{}};t[i][0].call(a.exports,function(e){var r=t[i][1][e];return n(r?r:e)},a,a.exports,q,t,e,r)}return e[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)n(r[i]);return n})({1:[function(t,e,r){(function(){angular.module("core").factory("TimelineService",["WebApiService","DateService","$locale",function(t,e,r){var n;return new(n=function(){function n(){this.workingMonth=e.getTodayMonthString(),this.workingDate=e.getTodayString(),this.monthLocaleString=this.getMonthLocaleString()}return n.prototype.workingMonth="",n.prototype.workingDate="",n.prototype.timeline=[],n.prototype.monthLocaleString="",n.prototype.fetchTimeline=function(){return t.fetchTimeline(this.workingMonth,function(t){return function(e){return angular.copy(e,t.timeline)}}(this))},n.prototype.setCounterValue=function(t,e){return t.yyyymm()===this.workingMonth?this.timeline[t.getDate()-1]=e:void 0},n.prototype.setWorkingMonth=function(t){return this.workingMonth=t,this.updateMonthLocaleString()},n.prototype.getWorkingMonth=function(){return this.workingMonth},n.prototype.setWorkingDate=function(t){return this.workingDate=t},n.prototype.getWorkingDate=function(){return this.workingDate},n.prototype.prevmonth=function(){return this.workingMonth=e.prevMonthString(new Date(this.workingMonth)),this.monthLocaleString=this.getMonthLocaleString()},n.prototype.nextmonth=function(){return this.workingMonth=e.nextMonthString(new Date(this.workingMonth)),this.monthLocaleString=this.getMonthLocaleString()},n.prototype.workingMonthIsLessThenCurrentMonth=function(){return Date.parse(new Date(this.workingMonth))<Date.parse(e.getTodayMonthString())},n.prototype.getMonthLocaleString=function(){return r.DATETIME_FORMATS.STANDALONEMONTH[+this.workingMonth.slice(5,7)-1]+" "+this.workingMonth.slice(0,4)},n}())}])}).call(this)},{}]},{},[1])(function M(t,e,r){function n(i,u){if(!e[i]){if(!t[i]){var s="function"==typeof require&&require;if(!u&&s)return s(i,!0);if(o)return o(i,!0);throw new Error("Cannot find module '"+i+"'")}var a=e[i]={exports:{}};t[i][0].call(a.exports,function(e){var r=t[i][1][e];return n(r?r:e)},a,a.exports,M,t,e,r)}return e[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)n(r[i]);return n})({1:[function(t,e,r){"use strict";angular.module("users").config(["$httpProvider",function(t){t.interceptors.push(["$q","$location","Authentication",function(t,e,r){return{responseError:function(n){switch(n.status){case 401:r.user=null,e.path("signin");break;case 403:}return t.reject(n)}}}])}])},{}]},{},[1])(function C(t,e,r){function n(i,u){if(!e[i]){if(!t[i]){var s="function"==typeof require&&require;if(!u&&s)return s(i,!0);if(o)return o(i,!0);throw new Error("Cannot find module '"+i+"'")}var a=e[i]={exports:{}};t[i][0].call(a.exports,function(e){var r=t[i][1][e];return n(r?r:e)},a,a.exports,C,t,e,r)}return e[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)n(r[i]);return n})({1:[function(t,e,r){"use strict";angular.module("users").config(["$stateProvider",function(t){t.state("profile",{url:"/settings/profile",templateUrl:"modules/users/views/settings/edit-profile.client.view.html"}).state("password",{url:"/settings/password",templateUrl:"modules/users/views/settings/change-password.client.view.html"}).state("accounts",{url:"/settings/accounts",templateUrl:"modules/users/views/settings/social-accounts.client.view.html"}).state("signup",{url:"/signup",templateUrl:"modules/users/views/authentication/signup.client.view.html"}).state("signin",{url:"/signin",templateUrl:"modules/users/views/authentication/signin.client.view.html"}).state("forgot",{url:"/password/forgot",templateUrl:"modules/users/views/password/forgot-password.client.view.html"}).state("reset-invalid",{url:"/password/reset/invalid",templateUrl:"modules/users/views/password/reset-password-invalid.client.view.html"}).state("reset-success",{url:"/password/reset/success",templateUrl:"modules/users/views/password/reset-password-success.client.view.html"}).state("reset",{url:"/password/reset/:token",templateUrl:"modules/users/views/password/reset-password.client.view.html"})}])},{}]},{},[1])(function D(t,e,r){function n(i,u){if(!e[i]){if(!t[i]){var s="function"==typeof require&&require;if(!u&&s)return s(i,!0);if(o)return o(i,!0);throw new Error("Cannot find module '"+i+"'")}var a=e[i]={exports:{}};t[i][0].call(a.exports,function(e){var r=t[i][1][e];return n(r?r:e)},a,a.exports,D,t,e,r)}return e[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)n(r[i]);return n})({1:[function(t,e,r){"use strict";angular.module("users").controller("AuthenticationController",["$scope","$http","$location","Authentication","$rootScope",function(t,e,r,n,o){t.authentication=n,t.authentication.user&&r.path("/"),t.signup=function(){e.post("/auth/signup",t.credentials).success(function(e){t.authentication.user=e,r.path("/")}).error(function(e){t.error=e.message})},t.signin=function(){e.post("/auth/signin",t.credentials).success(function(e){t.authentication.user=e,r.path("/today")}).error(function(e){t.error=e.message})}}])},{}]},{},[1])(function S(t,e,r){function n(i,u){if(!e[i]){if(!t[i]){var s="function"==typeof require&&require;if(!u&&s)return s(i,!0);if(o)return o(i,!0);throw new Error("Cannot find module '"+i+"'")}var a=e[i]={exports:{}};t[i][0].call(a.exports,function(e){var r=t[i][1][e];return n(r?r:e)},a,a.exports,S,t,e,r)}return e[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)n(r[i]);return n})({1:[function(t,e,r){"use strict";angular.module("users").controller("PasswordController",["$scope","$stateParams","$http","$location","Authentication",function(t,e,r,n,o){t.authentication=o,t.authentication.user&&n.path("/"),t.askForPasswordReset=function(){t.success=t.error=null,r.post("/auth/forgot",t.credentials).success(function(e){t.credentials=null,t.success=e.message}).error(function(e){t.credentials=null,t.error=e.message})},t.resetUserPassword=function(){t.success=t.error=null,r.post("/auth/reset/"+e.token,t.passwordDetails).success(function(e){t.passwordDetails=null,o.user=e,n.path("/password/reset/success")}).error(function(e){t.error=e.message})}}])},{}]},{},[1])(function T(t,e,r){function n(i,u){if(!e[i]){if(!t[i]){var s="function"==typeof require&&require;if(!u&&s)return s(i,!0);if(o)return o(i,!0);throw new Error("Cannot find module '"+i+"'")}var a=e[i]={exports:{}};t[i][0].call(a.exports,function(e){var r=t[i][1][e];return n(r?r:e)},a,a.exports,T,t,e,r)}return e[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)n(r[i]);return n})({1:[function(t,e,r){"use strict";angular.module("users").controller("SettingsController",["$scope","$http","$location","Users","Authentication",function(t,e,r,n,o){t.user=o.user,t.user||r.path("/"),t.hasConnectedAdditionalSocialAccounts=function(e){for(var r in t.user.additionalProvidersData)return!0;return!1},t.isConnectedSocialAccount=function(e){return t.user.provider===e||t.user.additionalProvidersData&&t.user.additionalProvidersData[e]},t.removeUserSocialAccount=function(r){t.success=t.error=null,e["delete"]("/users/accounts",{params:{provider:r}}).success(function(e){t.success=!0,t.user=o.user=e}).error(function(e){t.error=e.message})},t.updateUserProfile=function(e){if(e){t.success=t.error=null;var r=new n(t.user);r.$update(function(e){t.success=!0,o.user=e},function(e){t.error=e.data.message})}else t.submitted=!0},t.changeUserPassword=function(){t.success=t.error=null,e.post("/users/password",t.passwordDetails).success(function(e){t.success=!0,t.passwordDetails=null}).error(function(e){t.error=e.message})}}])},{}]},{},[1])(function E(t,e,r){function n(i,u){if(!e[i]){if(!t[i]){var s="function"==typeof require&&require;if(!u&&s)return s(i,!0);if(o)return o(i,!0);throw new Error("Cannot find module '"+i+"'")}var a=e[i]={exports:{}};t[i][0].call(a.exports,function(e){var r=t[i][1][e];return n(r?r:e)},a,a.exports,E,t,e,r)}return e[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)n(r[i]);return n})({1:[function(t,e,r){"use strict";angular.module("users").factory("Authentication",[function(){var t=this;return t._data={user:window.user},t._data}])},{}]},{},[1])(function k(t,e,r){function n(i,u){if(!e[i]){if(!t[i]){var s="function"==typeof require&&require;if(!u&&s)return s(i,!0);if(o)return o(i,!0);throw new Error("Cannot find module '"+i+"'")}var a=e[i]={exports:{}};t[i][0].call(a.exports,function(e){var r=t[i][1][e];return n(r?r:e)},a,a.exports,k,t,e,r)}return e[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)n(r[i]);return n})({1:[function(t,e,r){"use strict";angular.module("users").factory("Users",["$resource",function(t){return t("users",{},{update:{method:"PUT"}})}])},{}]},{},[1]);