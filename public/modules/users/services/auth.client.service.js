// Generated by CoffeeScript 1.10.0
(function() {
  angular.module('users').factory('AuthService', [
    '$q', '$timeout', '$http', function($q, $timeout, $http) {
      var getUserStatus, isLoggedIn, login, logout, register, user;
      user = null;
      isLoggedIn = function() {
        return !!user;
      };
      getUserStatus = function() {
        return user;
      };
      login = function(credentials) {
        var deferred;
        deferred = $q.defer();
        $http.post('/auth/signin', credentials).success(function(data, status) {
          if (status === 200 && data.status) {
            user = true;
            deferred.resolve();
          } else {
            user = false;
            deferred.reject(data);
          }
        }).error(function(data) {
          user = false;
          deferred.reject(data);
        });
        return deferred.promise;
      };
      logout = function() {
        var deferred;
        deferred = $q.defer();
        $http.get('/auth/signout').success(function(data) {
          user = false;
          return deferred.resolve();
        }).error(function(data) {
          user = false;
          return deferred.reject();
        });
        return deferred.promise;
      };
      register = function(credentials) {
        var deferred;
        deferred = $q.defer();
        $http.post('/auth/signup', credentials).success(function(data, status) {
          if (status === 200 && data.status) {
            deferred.resolve();
          } else {
            deferred.reject();
          }
        }).error(function(data) {
          return deferred.reject(data);
        });
        return deferred.promise;
      };
      return {
        isLoggedIn: isLoggedIn,
        getUserStatus: getUserStatus,
        login: login,
        logout: logout,
        register: register
      };
    }
  ]);

}).call(this);

//# sourceMappingURL=auth.client.service.js.map
